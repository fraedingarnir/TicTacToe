<!DOCTYPE html>
<html>
    <head>
        <title>Settings</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- load bootstrap for nicer ui -->
		<link rel="stylesheet" href="game.css">
        <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
    </head>
    <body>
	
		<h1>Tic Tac Toe! :) </h1>
		
        <table>
            <tr>
                <td>
					<form id ="one" method="post" class="form-inline" role="form">
					<button type="submit" id="btn1">1</button>
					</form>
				</td>
                <td>
					<form id ="two" method="post" class="form-inline" role="form">
					<button type="submit" id="btn2">2</button>
					</form>
				</td>
                <td>
					<form id ="three" method="post" class="form-inline" role="form">
					<button type="submit" id="btn3">3</button>
					</form>
				</td>
            </tr>
            <tr>
                <td>
					<form id ="four" method="post" class="form-inline" role="form">
					<button type="submit" id="btn4">4</button>
					</form>
				</td>
                <td>
					<form id ="five" method="post" class="form-inline" role="form">
					<button type="submit" id="btn5">5</button>
					</form>
				</td>
                <td>
					<form id ="six" method="post" class="form-inline" role="form">
					<button type="submit" id="btn6">6</button>
					</form>
				</td>
            </tr>
            <tr>
                <td>
					<form id ="seven" method="post" class="form-inline" role="form">
					<button type="submit" id="btn7">7</button>
					</form>
				</td>
                <td>
					<form id ="eight" method="post" class="form-inline" role="form">
					<button type="submit" id="btn8">8</button>
					</form>
				</td>
                <td>
					<form id ="nine" method="post" class="form-inline" role="form">
					<button type="submit" id="btn9">9</button>
					</form>
				</td>
            </tr>
        </table>
        <!-- Load jquery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

        <!-- Ajax down below -->
        <script>
        $(document).ready(function() {
			
			$.ajax({
			type: "POST",
			url: "init",
			data: null
			});
			
			var player = 'O';
			
			$('#one').submit(function( event ) {
			
				if(player == 'X')
				{
					player = 'O';
				}
				else
				{
					player = 'X';
				}
				
				var theurl = "/addplay0o";
				if(player == 'X')
				{
					theurl = "/addplay0x";
				}
				
                $.ajax({
                    type: $('#one').attr('method'),
                    url: theurl,
                    data: null
                }).done(function(val) {
                    $('#btn1').html(player).attr('class', 'btn-default disabled');
					
					$.ajax({
                    type: $('#one').attr('method'),
                    url: "haswon",
                    data: null
                }).done(function(val) {
					alert(val);
					if(val == "true")
					{
						alert(player + " won! :)");
					}
					
                });
			});
                }).fail(function() {
                    $('#btn1').html('Error').attr('class', 'alert alert-danger');
                });
                event.preventDefault();
				
				document.getElementById("btn1").disabled = true; 
            });
			
			$('#two').submit(function( event ) {
			
				if(player == 'X')
				{
					player = 'O';
				}
				else
				{
					player = 'X';
				}
				
				var theurl = "/addplay1o";
				if(player == 'X')
				{
					theurl = "/addplay1x";
				}
                $.ajax({
                    type: $('#two').attr('method'),
                    url: theurl,
                    data: null
                }).done(function(val) {
                    $('#btn2').html(player).attr('class', 'btn-default disabled');
                }).fail(function() {
                    $('#btn2').html('Error').attr('class', 'alert alert-danger');
                });
                event.preventDefault();
				
				$.ajax({
                    type: $('#two').attr('method'),
                    url: "haswon",
                    data: null
                }).done(function(val) {
					alert(val);
					if(val == "true")
					{
						alert(player + " won! :)");
					}
                });
				document.getElementById("btn2").disabled = true; 
            });
			
			$('#three').submit(function( event ) {
			
				if(player == 'X')
				{
					player = 'O';
				}
				else
				{
					player = 'X';
				}
				
				var theurl = "/addplay2o";
				if(player == 'X')
				{
					theurl = "/addplay2x";
				}
                $.ajax({
                    type: $('#three').attr('method'),
                    url: theurl,
                    data: null
                }).done(function(val) {
                    $('#btn3').html(player).attr('class', 'btn-default disabled');
                }).fail(function() {
                    $('#btn3').html('Error').attr('class', 'alert alert-danger');
                });
                event.preventDefault();
				
				document.getElementById("btn3").disabled = true; 
            });
			
			$('#four').submit(function( event ) {
			
				if(player == 'X')
				{
					player = 'O';
				}
				else
				{
					player = 'X';
				}
				
				var theurl = "/addplay3o";
				if(player == 'X')
				{
					theurl = "/addplay3x";
				}
                $.ajax({
                    type: $('#four').attr('method'),
                    url: theurl,
                    data: null
                }).done(function(val) {
                    $('#btn4').html(player).attr('class', 'btn-default disabled');
                }).fail(function() {
                    $('#btn4').html('Error').attr('class', 'alert alert-danger');
                });
                event.preventDefault();
				
				document.getElementById("btn4").disabled = true; 
            });
			
			$('#five').submit(function( event ) {
			
				if(player == 'X')
				{
					player = 'O';
				}
				else
				{
					player = 'X';
				}
				
				var theurl = "/addplay4o";
				if(player == 'X')
				{
					theurl = "/addplay4x";
				}
                $.ajax({
                    type: $('#five').attr('method'),
                    url: theurl,
                    data: null
                }).done(function(val) {
                    $('#btn5').html(player).attr('class', 'btn-default disabled');
                }).fail(function() {
                    $('#btn5').html('Error').attr('class', 'alert alert-danger');
                });
                event.preventDefault();
			
				document.getElementById("btn5").disabled = true; 
            });
			
			$('#six').submit(function( event ) {
			
				if(player == 'X')
				{
					player = 'O';
				}
				else
				{
					player = 'X';
				}
				
				var theurl = "/addplay5o";
				if(player == 'X')
				{
					theurl = "/addplay5x";
				}
                $.ajax({
                    type: $('#six').attr('method'),
                    url: theurl,
                    data: null
                }).done(function(val) {
                    $('#btn6').html(player).attr('class', 'btn-default disabled');
                }).fail(function() {
                    $('#btn6').html('Error').attr('class', 'alert alert-danger');
                });
                event.preventDefault();
				
				document.getElementById("btn6").disabled = true; 
            });
			
			$('#seven').submit(function( event ) {
			
				if(player == 'X')
				{
					player = 'O';
				}
				else
				{
					player = 'X';
				}
				
				var theurl = "/addplay6o";
				if(player == 'X')
				{
					theurl = "/addplay6x";
				}
                $.ajax({
                    type: $('#seven').attr('method'),
                    url: theurl,
                    data: null
                }).done(function(val) {
                    $('#btn7').html(player).attr('class', 'btn-default disabled');
                }).fail(function() {
                    $('#btn7').html('Error').attr('class', 'alert alert-danger');
                });
                event.preventDefault();
				
				document.getElementById("btn7").disabled = true; 
            });
			
			$('#eight').submit(function( event ) {
			
				if(player == 'X')
				{
					player = 'O';
				}
				else
				{
					player = 'X';
				}
				
				var theurl = "/addplay7o";
				if(player == 'X')
				{
					theurl = "/addplay7x";
				}
                $.ajax({
                    type: $('#eight').attr('method'),
                    url: theurl,
                    data: null
                }).done(function(val) {
                    $('#btn8').html(player).attr('class', 'btn-default disabled');
                }).fail(function() {
                    $('#btn8').html('Error').attr('class', 'alert alert-danger');
                });
                event.preventDefault();
				
				document.getElementById("btn8").disabled = true; 
            });
			
			$('#nine').submit(function( event ) {
			
				if(player == 'X')
				{
					player = 'O';
				}
				else
				{
					player = 'X';
				}
				
				var theurl = "/addplay8o";
				if(player == 'X')
				{
					theurl = "/addplay8x";
				}
                $.ajax({
                    type: $('#nine').attr('method'),
                    url: theurl,
                    data: null
                }).done(function(val) {
                    $('#btn9').html(player).attr('class', 'btn-default disabled');
                }).fail(function() {
                    $('#btn9').html('Error').attr('class', 'alert alert-danger');
                });
                event.preventDefault();
				
				document.getElementById("btn9").disabled = true; 
            });
        });
        </script>
    </body>
</html>